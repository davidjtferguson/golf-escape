pico-8 cartridge // http://www.pico-8.com
version 41
__lua__

function _init()
 frame=0

 --[[
 sp=0
 backupaddr1=512*(sp\16)+4*(sp%16)
 sp=1
 backupaddr2=512*(sp\16)+4*(sp%16)
 ]]

 --backup to persistent
 -- cart data memory
 backupaddr1=0x5e00

 backupaddr2=0x5e10
end

function _update()
 frame+=1

 if frame==10 then
	 sp=17
	 addr=512*(sp\16)+4*(sp%16)

	 --save row 1 to set buffers up
	 memcpy(backupaddr2,addr,4)

	 pixelshift(addr+64,addr+(64*2))

	 pixelshift(addr+(64*3),addr+(64*4))

	 pixelshift(addr+(64*5),addr+(64*6))

	 pixelshift(addr+(64*7),addr)

	 frame=0
 end
end

function pixelshift(addr1,addr2)
 --save row 1
 memcpy(backupaddr1,addr1,4)

 -- write row 1 to row 2
 memcpy(addr1,backupaddr2,4)

 -- save row 3
 memcpy(backupaddr2,addr2,4)

 -- write row 2 to row 3
 memcpy(addr2,backupaddr1,4)
end

function _draw()
 cls(0)
 print(addr)

 spr(0,8,8)
 spr(1,8,16)
 spr(17,32,64)
 spr(17,32,72)
 spr(17,32,80)
 spr(17,32,88)
 spr(18,64,64)
end


function pixelshiftverbose()

	 -- save row 2
	 memcpy(backupaddr1,addr+64,4)

	 -- write row 1 to row 2
	 memcpy(addr+64,addr,4)

	 -- save row 3
	 memcpy(backupaddr2,addr+(64*2),4)

	 -- write row 2 to row 3
	 memcpy(addr+(64*2),backupaddr1,4)

	 -- save row 4
	 memcpy(backupaddr1,addr+(64*3),4)

	 --write row 3 to row 4
	 memcpy(addr+(64*3),backupaddr2,4)

	 --save row 5
	 memcpy(backupaddr2,addr+(64*4),4)

	 --write 4 to 5
	 memcpy(addr+(64*4),backupaddr1,4)

	 -- save row 6
	 memcpy(backupaddr1,addr+(64*5),4)

	 --write row 5 to row 6
	 memcpy(addr+(64*5),backupaddr2,4)

	 --save row 7
	 memcpy(backupaddr2,addr+(64*6),4)

	 --write 6 to 7
	 memcpy(addr+(64*6),backupaddr1,4)

	 -- save row 8
	 memcpy(backupaddr1,addr+(64*7),4)

	 --write 7 to 8
	 memcpy(addr+(64*7),backupaddr2,4)

	 --write 8 to 1
	 memcpy(addr,backupaddr1,4)

end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b4333b077777777000000007a9f6d200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3433b044444444000000007a9f6d200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3343b099999999000000007a9f6d200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3334b0ffffffff000000007a9f6d200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b4333b066666666000000007a9f6d200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3433b0dddddddd000000007a9f6d200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3343b022222222000000007a9f6d200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3343b088888888000000007a9f6d200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b4333b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3433b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3343b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3334b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b4333b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3433b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3343b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b3334b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
